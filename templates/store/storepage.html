

{%extends "../base.html"%}
{% load static %}
{% load admin_urls %}
{% load crispy_forms_tags %}

{% block current_page %}XXXXXXXXX{%endblock%}

{%block content%}


<div class="sticky-search-bar">
	<input class="search-txt" type="text" name="" placeholder="Search for items..." id="input">
	<a class="search-btn" id="searchButton" href="#">
	  <i class="fas fa-search"></i>
	</a>
</div>


<!-- Store Page -->
<div class="login">
	<div style="padding-bottom:28px" class="container">
		<h2 id="NAME"></h2>
		<p style="font-size:28px;color:black" id="DESCRIPTION"><p>	
		<p style="font-size:14px" id="ADDRESS"><p>
		<p style="font-size:14px" id="PHONE"><p>
		<p style="font-size:14px" id="TEST"><p>
	</div>
	<div class="container">
		<h2 style="font-size:24px;">Selection</h2>
		<div class = "items-container" id="itemsContainer">

		</div>
	</div>
</div>

<!-- need to run this after otherwise page is not loaded yet and cannot search by div -->
<script src = "{% static 'store/js/store.js' %}"></script>
<script>
	createStorePage( "{{ vendorItems }}" , "{{ vendorID }}");

	window.onload = function() {
		var vendorID = "{{ vendorID }}";
		var vendorName = "{{ vendorName }}";
		var vendorItemNames = "{{ vendorItems }}";
		var vendorItemIDs = "{{ vendorItemIDs }}";
		var vendorAddress = "{{ vendorAddress }}";
		var vendorCategory = "{{ vendorCategory }}";
		var vendorHours = "{{ vendorHours }}";
		var vendorPhone = "{{ vendorPhone }}";
		var vendorDescription = "{{ vendorDescription }}";
		var itemsListed = "{{ itemsListed }}";

		//set the breadcrumbs
		document.getElementById("activeStore").innerText = vendorName;

		// vendor info
		document.getElementById("NAME").innerHTML = vendorName;
		document.getElementById("DESCRIPTION").innerHTML = vendorDescription;
		document.getElementById("ADDRESS").innerHTML = vendorAddress;
		document.getElementById("PHONE").innerHTML = vendorPhone;

		// search button functionality
        var searchButton = document.getElementById("searchButton");

        searchButton.onclick = function() {
			var term;
			term = document.getElementById("input").value.trim();
			if(term == ""){ term = "all"; }

			searchButton.href = "/storepage/" + "{{ vendorID }}" + "/" + term;
			//return false;
        }
		
		// add message if no products found
		if(itemsListed == "0"){
			var msg = document.createElement('h');
			msg.style.fontSize = "xxx-large";
			msg.style.alignContent = "center";
			msg.innerHTML = "Sorry, no products were found from this search!";
			document.getElementById("itemsContainer").appendChild(msg);

			var sch = document.createElement('div');
			sch.className = "sticky-search-bar";
			document.getElementById("itemsContainer").appendChild(sch);
		}

	};


</script>



<!-- //Store Page -->
{%endblock%}